러닝타입스크립트 part 1 - ch 2

2.1 타입의 종류 
"타입"은 자바스크립트에서 다루는 값의 형태에 대한 설명입니다.
여기서 '형태'란 값에 존재하는 속성과 메서드 그리고 내장되어 있는 typeof 연산자가 설명하는 것을 의미합니다. 

타입스크립트에서의 원시타입 
- null; // null
- undefined; // undefined
- true; // boolean
- "Louise"; // string
- 1337;  // number
- 1337n; // bigint
- Symbol("Franklin"); // symbol 

2.1.1 타입 시스템
타입 시스템은 프로그래밍 언어가 프로그램에서 가질 수 있는 타입을 이해하는 방법에 대한 규칙 집합입니다. 

1. 코드를 읽고 존재하는 모든 타입과 값을 이해합니다. 
2. 각 값이 초기 선언에서 가질 수 있는 타입을 확인합니다. 
3. 각 값이 추후 코드에서 어떻게 사용될 수 있는지 모든 방법을 확인합니다.
4. 값의 사용법이 타입과 일치하지 않으면 사용자에게 오류를 표시합니다. 

타입스크립트가 멤버 속성을 함수로 잘못 호출해 타입 오류가 발생하는 코드

```ts
let firstName = "Whitney";
firstName.length();
// error : This expression is not callable.
// Type 'Number' has no call signatures
```

1. 코드를 읽고 firstName이라는 변수를 이해합니다. 
2. 초깃값이 "Whitney"이라는 firstName이 string타입이라고 결론짓습니다.
3. firstName의 .length 멤버를 함수처럼 호출하는 코드를 확인합니다. 
4. string의 .length멤버는 함수가 아닌 숫자라는 오류를 표시합니다. 즉, 함수처럼 호출할 수 없습니다. 

2.1.2 오류 종류 

구문 오류 
구문 오류는 타입스크립트가 이해할 수 없는 잘못된 구문을 감지할 때 발생합니다. 이는 타입스크립트가 타입스크립트 파일에서 자바스크립트 파일을 올바르게 생성할 수 없도록 차단합니다. 

```ts
let let wat;
// error: ',' expected.
```
-> let let, wat; 

타입 오류
타입 오류는 타입스크립트의 타입 검사기가 프로그램의 타입에서 오류를 감지했을 때 발생합니다. 오류가 발생했다고 해서 타입스크립트 구문이 자바스크립트로 변환되는 것을 차단하지는 않습니다. 하지만 코드가 실행되면 충돌하거나 예기치 않게 작동할 수 있음을 나타냅니다. 

```ts
console.blub("Nothing is worth more than laughter.");
// error: Property 'blub' does not exist on type 'Console'. 
```

2.2 할당 가능성
타입스크립트는 변수의 초깃값을 읽고 해당 변수가 허용되는 타입을 결정합니다. 
변수에 새로운 값이 할당되면, 새롭게 할당된 값의 타입이 변수의 타입과 동일한지 확인합니다. 

```ts
let firstName = "Carole";
firstName = "Joen";
firstName = true;
// error: Type 'boolean' is not assignable to type 'string'.
```
2.3 타입 애너테이션 
초기 타입을 유추할 수 없는 변수 - 진화하는 any

```ts
let rocker; // 타입 any
rocker = "kim"; // string
rocker.toUpperCase(); // ok
rocker = 123; // number
rocker.toPrecision(1); // ok

rocker.toUpperCase();
// error : 'toUpperCase' does not exist on type 'number'.
```

타입 애너테이션은 변수 이름 뒤에 배치되며 콜론 (:)과 타입 이름을 차례대로 기재합니다. 
다음 타입 애너테이션은 rocker 변수가 string 타입임을 나타냅니다. 
다음 rocker를 number로 바꿈에 따라 toUpperCase()가 오류가 납니다. 

2.4 타입 형태
타입스크립트는 변수에 할당된 값이 원래 타입과 일치하는지 확인하는 것 이상을 수행합니다.
타입스크립트는 객체에 어떤 멤버 속성이 존재하는지 알고 있습니다. 

```ts
let name = "kim";
name.length; // ok

name.push('!'); // error
```

2.4.1  모듈
자바스크립트는 비교적 최근까지 서로 다른 파일에 작성된 코드를 공유하는 방법과 관련된 사양을 제공하지 않았습니다. 

- 모듈 : export 또는 import가 있는 파일
- 스크립트 : 모듈이 아닌 모든 파일 

타입스크립트는 해당 파일을 전역 스코프로 간주하여 모든 스크립트 파일의 내용에 접근할 수 있습니다. 
export 또는 import 문으로 해결 가능합니다. 

3.1 유니언 타입 
이거 혹은 저거와 같은 타입을 유니언이라고 합니다. 
유니업 타입은 값이 정확히 어떤 타입인지 모르지만 두 개 이상의 옵션 중 하나라는 것을 알고 있는 경우 코드를 처리하는 훌륭한 개념입니다. 
타입스크립트는 가능한 값 또는 구성 요소 사이에 | 수직선 연산자를 사용해 유니언 타입임을 나타냅니다. 

3.1.1 유니언 타입 선언 

```ts
let thinker : string | null = null;

if  (Math.random() > 0.5) {
    thinker = "Susanne Langer"; // ok
}
```

thinker의 초깃값은 null이지만 잠재적으로 null 대신 string이 될 수 있음을 알려줍니다.
명시적으로 string | null 타입 애너테이션은 타입스크립트가 thinker의 값으로 string 타입의 값을 할당할 수 있음을 의미합니다. 

3.1.2 유니언 속성 
값이 유니언 타입일 때 타입스크립트는 유니언으로 선언한 모든 가능한 타입에 존재하는 멤버 속성에만 접근할 수 있습니다. 
유니언 외의 타입에 접근하려고 하면 타입 검사 오류가 발생합니다. 

3.2  내로잉
내로잉은 값이 정의, 선언 혹은 이전에 유추된 것보다 더 구체적인 타입임을 코드에서 유추하는 것입니다.
타입을 좁히는데 사용할 수 있는 논리적 검사를 타입 가드라고 합니다. 

3.2.1 값 할당을 통한 내로잉 
변수에 값을 직접 할당하면 타입스크립트는 변수의 타입을 할당된 값의 타입으로 좁힙니다. 

```ts
let admiral : number | string;

admiral = "Grace Hopper";

admiral.toUpperCase(); // ok

admiral.toFixed(); // error 
```

3.2.2 조건 검사를 통한 내로잉 
일반적으로 타입스크립트에서는 변수가 알려진 값과 같은 지 확인하는 if문을 통해 변수의 값을 좁히는 방법을 사용합니다. 

```ts
...
if(scientist === "Rosalind Franklin") {
    scientist.toUpperCase();
}
...
```

3.2.3 typeof 검사를 통한 내로잉
타입스크립트는 직접 값을 확인해 타입을 좁히기도 하지만, typeof 연산자를 사용할 수 있습니다. 

```ts
...
if(typeof researcher === "string") {
    researcher.toUpperCase(); // ok
}
...
```

3.3 리터럴 타입 
각 원시 타입은 해당 타입이 가질 수 있는 가능한 모든 리터럴 값의 전체 조합으로 생각할 수 있습니다. 
즉, 원시 타입은 해당 타입의 가능한 모든 리터럴 값의 집합입니다. 

3.4 엄격한 null 검사
리터럴로 좁혀진 유니언의 힘은 타입스크립트에서 업격한 null 검사라 부르는 타입 시스템 영역인 '잠재적으로 정의되지 않은 undefined 값'으로 작업할 때 특히 두드러집니다. 

`십억 달러의 실수' 
다른 타입이 필요한 위치에서 null 값을 사용하도록 허용하는 많은 타입 시스템을 가리키는 업계 용어입니다. 

3.4.2 참 검사를 통한 내로잉 
자바스크립트에서 참 또는 truthy는 &&연산자 또는 if 문 처럼 boolean 문맥에서 true로 간주됩니다. 
타입 스크립트에서는 잠재적인 값 중 truthy로 확인된 일부에 한해서만 변수의 타입을 좁힐 수 있습니다. 


